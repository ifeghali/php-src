#!/bin/sh

extname="$1"
EXTNAME=`echo $1|tr a-z A-Z`

givup() {
	echo $*
	exit 1
}

if test "$extname" = ""; then
	givup "usage: $0 extension-name"
fi

if test -d "$extname" ; then
	givup "Directory $extname already exists."
fi

echo "Creating directory"

mkdir $extname || givup "Cannot create directory $extname"

cd $extname
chmod 755 .

echo "Creating basic files:\c"

echo " config.m4\c"
cat >config.m4 <<eof
dnl \$Id\$
dnl config.m4 for extension $extname
dnl don't forget to call PHP_EXTENSION($extname)

eof

echo " Makefile.am\c"
cat >Makefile.am <<eof
# \$Id\$

INCLUDES=@INCLUDES@ -I@top_srcdir@ -I@top_srcdir@/libzend
noinst_LIBRARIES=libphpext_$extname.a
libphpext_${extname}_a_SOURCES=$extname.c

eof


echo " .cvsignore\c"
cat >.cvsignore <<eof
.deps
Makefile.in
Makefile
eof

echo " config.h.stub\c"
cat >config.h.stub<<eof
/* define if you want to use the $extname extension */
/* #undef HAVE_LIB$EXTNAME */
eof

chmod 644 *

echo " [done]."

