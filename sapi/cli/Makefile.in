LTLIBRARY_NAME = libphp4cli.la
LTLIBRARY_SOURCES = php_cli.c getopt.c

LTLIBRARY_DEPENDENCIES = \
		$(top_builddir)/Zend/libZend.la \
		$(top_builddir)/main/libmain_cli.la \
		$(top_builddir)/$(REGEX_LIB) \
		$(EXT_CLI_LTLIBS) \
		$(top_builddir)/$(TSRM_LIB)

LTLIBRARY_LDFLAGS = -rpath $(phptempdir) $(EXTRA_LDFLAGS) $(LDFLAGS) $(PHP_RPATHS)
LTLIBRARY_LIBADD = $(LTLIBRARY_DEPENDENCIES) $(EXTRA_LIBS)


PROGRAM_NAME         = php
PROGRAM_SOURCES      = 
PROGRAM_LDADD        = libphp4cli.la $(EXT_PROGRAM_LDADD)
PROGRAM_LDFLAGS      = -export-dynamic
PROGRAM_DEPENDENCIES = $(PROGRAM_LDADD)

targets = $(LTLIBRARY_NAME) $(PROGRAM_NAME)

include $(top_srcdir)/build/rules.mk
CFLAGS          = $(CFLAGS_CLEAN) -prefer-non-pic -static
PHP_COMPILE     = $(CC) $(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS) -c $< && touch $@
CXX_PHP_COMPILE = $(CXX) $(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)  -c $< && touch $@
include $(top_srcdir)/build/library.mk
include $(top_srcdir)/build/program.mk
