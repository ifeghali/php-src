LTLIBRARY_NAME = libmain.la

LTLIBRARY_SOURCES = \
       main.c internal_functions.c snprintf.c php_sprintf.c \
       configuration-parser.c configuration-scanner.c \
       safe_mode.c fopen-wrappers.c alloca.c \
       php_ini.c SAPI.c rfc1867.c fdfdata.c php_content_types.c strlcpy.c \
       strlcat.c mergesort.c reentrancy.c php_variables.c php_ticks.c \
       network.c php_open_temporary_file.c

include $(top_srcdir)/build/ltlib.mk

configuration-parser.h configuration-parser.c: $(srcdir)/configuration-parser.y
	$(YACC) -p cfg -v -d $< -o configuration-parser.c

configuration-scanner.c: $(srcdir)/configuration-scanner.l
	$(LEX) -Pcfg -o$@ -i $<

internal_functions.c: $(srcdir)/internal_functions.c.in $(top_builddir)/config.status
	cd $(top_builddir) && \
	REDO_ALL=yes ./config.status
