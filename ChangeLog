2005-01-10  Rasmus Lerdorf  <rasmus@lerdorf.com>

    * ZendEngine2/zend.h
      ZendEngine2/zend_API.c:
      Fix OSX DL_UNLOAD macro and actually use it to make shared extensions
      work on OSX.

2005-01-10  Antony Dovgal  <tony2001@phpclub.net>

    * ext/iconv/config.m4:
      fix Konstantin's last name Chugeuv -> Chuguev

2005-01-10  Rasmus Lerdorf  <rasmus@lerdorf.com>

    * (PHP_4_3)
      Zend/zend.h
      Zend/zend_API.c:
      Fixed shared extensions on OSX.  We were using zend_mh_bundle_load to
      load a shared extension, but dlclose() to unload it because it was
      hardcoded.  This caused problems for extensions loaded from php.ini
      since the Apple linker does a symbol check on an unload and we hadn't
      properly unloaded the shared extensions when Apache unloaded the parent
      PHP shared library during its 2-pass load/unload/load startup routine.
      By fixing the DL_UNLOAD macro and un-hardcoding the dlclose() call this
      now works.

2005-01-10  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * (PHP_4_3)
      ext/standard/tests/math/bug30069.phpt:
      MFH: update test to include negative floats as strings too

    * ext/standard/tests/math/bug30069.phpt:
      update test to include negative floats as strings too

    * (PHP_4_3)
      NEWS
      sapi/cgi/cgi_main.c:
      MFH: - Fixed bug #28074 (FastCGI: stderr should be written in a FCGI stderr
      stream).

    * (PHP_5_0)
      NEWS
      sapi/cgi/cgi_main.c:
      - Fixed bug #28074 (FastCGI: stderr should be written in a FCGI stderr
      stream).
        (chris at ex-parrot dot com)

    * sapi/cgi/cgi_main.c:
      - Fixed bug #28074 (FastCGI: stderr should be written in a FCGI stderr
      stream).

    * ext/standard/php_parsedate.h
      ext/standard/php_smart_str.h
      ext/standard/php_smart_str_public.h
      ext/standard/url_scanner_ex.c
      ext/standard/url_scanner_ex.h
      ext/standard/url_scanner_ex.re:
      Missing $Id$ tag

    * ext/standard/credits_ext.h
      ext/standard/credits_sapi.h:
      - Update credits

    * ChangeLog
      ChangeLog.2004.gz:
      - Compressed 2004 Changelog

    * ZendEngine2/header
      ZendEngine2/zend_arg_defs.c
      ZendEngine2/zend_strtod.c
      ZendEngine2/zend_vm_def.h
      ZendEngine2/zend_vm_execute.h
      ZendEngine2/zend_vm_gen.php
      ZendEngine2/zend_vm_opcodes.h:
      - Added missing header sections.

2005-01-10  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * ext/sqlite/sqlite.c:
      - Fix proto

    * ext/sqlite/sqlite.c:
      - Bugfix #31342: SQLite OO interface with Exceptions (hugo dot pl at gmail
      dot com)

    * ext/sqlite/php_sqlite.h
      ext/sqlite/sqlite.c:
      - Implement iterator interface in sqlite

2005-01-10  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * ZendEngine2/acinclude.m4
      ZendEngine2/configure.in:
      - Added AC_ZEND_C_BIGENDIAN macro (as requested by Andi)

    * configure.in
      configure.in
      configure.in:
      - The pic/no-pic patch by Joe Orton.

2005-01-09  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * (PHP_4_3)
      configure.in:
      Forgot this from the outside-source-dir patch

    * (PHP_4_3)
      Zend/zend.h:
      This was not supposed to be committed..

    * (PHP_5_0)
      configure.in
      TSRM/TSRM.h
      TSRM/TSRM.h
      TSRM/tsrm_config_common.h
      TSRM/tsrm_config_common.h
      Zend/zend.h
      ZendEngine2/zend.h
      ext/bcmath/libbcmath/src/config.h
      ext/bcmath/libbcmath/src/config.h
      ext/gd/gdcache.c
      ext/gd/gdcache.c
      ext/gd/gdttf.c
      ext/gd/gdttf.c
      ext/mcve/mcve.c
      ext/mcve/mcve.c
      ext/odbc/birdstep.c
      ext/odbc/birdstep.c
      ext/pcre/pcrelib/internal.h
      ext/pcre/pcrelib/internal.h
      ext/sqlite/config.m4
      ext/standard/html.c
      ext/standard/html.c
      main/alloca.c
      main/alloca.c
      main/php_compat.h
      main/php_compat.h
      main/php_scandir.c
      main/php_scandir.c
      main/php_scandir.h
      main/php_scandir.h
      main/php_sprintf.c
      main/php_syslog.h
      main/php_syslog.h
      sapi/cgi/libfcgi/include/fcgi_config.h
      sapi/cgi/libfcgi/include/fcgi_config.h:
      MFH: - Fix outside-source-tree builds. Always include generated header
      files
             with #include <some_header.h> to make sure the correct file is
      used.

    * configure.in
      TSRM/TSRM.h
      TSRM/tsrm_config_common.h
      ZendEngine2/zend.h
      ext/bcmath/libbcmath/src/config.h
      ext/gd/gdcache.c
      ext/gd/gdttf.c
      ext/mcve/mcve.c
      ext/odbc/birdstep.c
      ext/pcre/pcrelib/internal.h
      ext/sqlite/config.m4
      ext/standard/html.c
      main/alloca.c
      main/php_compat.h
      main/php_scandir.h
      main/php_sprintf.c
      main/php_syslog.h
      sapi/cgi/libfcgi/include/fcgi_config.h:
      - Fix outside-source-tree builds. Always include generated header files
        with #include <some_header.h> to make sure the correct file is used.

2005-01-09  Antony Dovgal  <tony2001@phpclub.net>

    * (PHP_4_3)
      NEWS:
      BFN & end of cvs spam

    * (PHP_5_0)
      NEWS:
      BFN

    * ext/session/tests/bug31454.phpt
      ext/session/tests/bug31454.phpt
      ext/session/tests/bug31454.phpt:
      add skipif section

    * ext/session/tests/bug31454.phpt:
        1.1.4;
      add test for bug #31454

    * ext/session/session.c:
      efree(name)

    * ext/session/session.c:
      fix bug #31454 (session_set_save_handler crashes PHP when supplied
      non-existent object ref)

2005-01-09  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * (PHP_4_3)
      Zend/zend_ini.c
      Zend/zend_ini.h:
      MFH: - Fix leak. (forgot from previous commit)

    * (PHP_4_3)
      ext/standard/basic_functions.c
      ext/standard/basic_functions.c
      main/main.c
      main/main.c
      main/php_main.h
      main/php_main.h:
      MFH: - Fix leaks with registered shutdown functions.

    * ext/standard/basic_functions.c
      main/main.c
      main/php_main.h:
      - Fix leaks with registered shutdown functions.

    * ZendEngine2/zend.c:
      MFB: - Rationalize code a bit

    * (PHP_4_3)
      Zend/zend.h:
      MFZE2: Some cleanups

    * TODO
      TODO:
      Remove done stuff

2005-01-08  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * (PHP_4_3)
      ext/standard/basic_functions.c
      ext/standard/basic_functions.c:
      MFH: - Fix possible crash (PR#26223). Leaks remain.

    * ext/standard/basic_functions.c:
      - Fix possible crash (PR#26223). Leaks remain.

2005-01-08  Georg Richter  <georg@mysql.com>

    * ext/mysqli/mysqli_embedded.c
      ext/mysqli/tests/connect.inc:
      fixed compile bug under Windows (libmysql.def currently doesn't export
      mysql_server_init/end).
      Thanks to Sebastian Bergmann for reporting

2005-01-08  Dmitry Stogov  <dmitry@zend.com>

    * TSRM/tsrm_virtual_cwd.c:
      Unnecesary check was removed

2005-01-08  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * ext/standard/tests/serialize/bug31442.phpt:
      - Add new test

    * ext/standard/tests/serialize/bug30234.phpt:
      - Unify

    * ext/mysqli/mysqli_exception.c:
      - Fix shared build

    * ext/mysqli/mysqli.c:
      - Remove double destroy (which is definitively wrong and prevents php from
        normal execution).

    * ext/dom/document.c:
      - Fix dependency

2005-01-08  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * NEWS:
      NN

    * ext/snmp/php_snmp.h
      ext/snmp/snmp.c:
      - Fix some memory leaks

2005-01-07  Antony Dovgal  <tony2001@phpclub.net>

    * ext/standard/head.c:
      remove duplicated include

2005-01-07  Magnus M‰‰tt‰  <novell@kiruna.se>

    * ext/posix/posix.c:
      Argh.. Committed old patch.
      Add safe_mode check and fix error code.

2005-01-07  Antony Dovgal  <tony2001@phpclub.net>

    * acinclude.m4:
      fix PHP_CHECK_64BIT macro (finally got 64bit machine to test it)

2005-01-07  Georg Richter  <georg@mysql.com>

    * ext/mysqli/mysqli.c:
      forgot to remove some comments in last commit:(

2005-01-07  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ext/mysqli/mysqli_exception.c:
      ZTS fix.

    * ext/mysqli/config.w32:
      Sync with config.m4.

2005-01-07  Magnus M‰‰tt‰  <novell@kiruna.se>

    * NEWS
      ext/posix/php_posix.h
      ext/posix/posix.c:
      Added new function: posix_access()
      Feature requests: #29615, #14924

2005-01-07  Georg Richter  <georg@mysql.com>

    * NEWS:
      new mysqli stuff

    * ext/mysqli/config.m4
      ext/mysqli/mysqli.c
      ext/mysqli/mysqli_api.c
      ext/mysqli/mysqli_driver.c
      ext/mysqli/mysqli_embedded.c
      ext/mysqli/mysqli_exception.c
      ext/mysqli/mysqli_fe.c
      ext/mysqli/mysqli_nonapi.c
      ext/mysqli/mysqli_prop.c
      ext/mysqli/mysqli_report.c
      ext/mysqli/mysqli_warning.c
      ext/mysqli/php_mysqli.h
      ext/mysqli/tests/001.phpt
      ext/mysqli/tests/014.phpt
      ext/mysqli/tests/017.phpt
      ext/mysqli/tests/033.phpt
      ext/mysqli/tests/034.phpt
      ext/mysqli/tests/041.phpt
      ext/mysqli/tests/045.phpt
      ext/mysqli/tests/047.phpt
      ext/mysqli/tests/049.phpt
      ext/mysqli/tests/061.phpt
      ext/mysqli/tests/connect.inc
      ext/mysqli/tests/skipif.inc
      ext/mysqli/tests/skipifemb.inc:
      Added new classes:
      	mysqli_driver
      	mysqli_warning
      	mysqli_exception
      	mysqli_sql_exception
      
      Improved embedded server support
      changed testsuite to work also with embedded server
      
      Made statement and resultset classes extendable
      
      minor fixes

2005-01-07  Anantha Kesari H Y  <hyanantha@novell.com>

    * (PHP_5_0)
      tests/classes/array_access_001.phpt
      tests/classes/array_access_002.phpt
      tests/classes/array_access_003.phpt
      tests/classes/array_access_004.phpt:
      removed skipif sections that check for the existence of ArrayAccess class
      which is nomore a class but a interface.As the corresponding files in
      PHP-5.1-HEAD had removed the SKIPIF blocks themselves, removing the same
      for PHP5_0 branch also.

2005-01-07  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * (PHP_4_3)
      NEWS
      NEWS:
      BFN

    * (PHP_4_3)
      sapi/apache2filter/sapi_apache2.c
      sapi/apache2filter/sapi_apache2.c:
      MFH: - Fixed bug #31055 (apache2filter: per request leak proportional to
      the full path of the request URI)

    * sapi/apache2filter/sapi_apache2.c:
      - Fixed bug #31055 (apache2filter: per request leak proportional to the
      full path of the request URI)

    * (PHP_4_3)
      acinclude.m4
      acinclude.m4
      configure.in
      configure.in
      scripts/phpize.m4
      scripts/phpize.m4:
      MFH: - Make sure $host_alias is never empty

    * acinclude.m4
      configure.in
      scripts/phpize.m4:
      - Make sure $host_alias is never empty

2005-01-07  Wez Furlong  <wez.php@thebrainroom.net>

    * EXTENSIONS
      EXTENSIONS
      EXTENSIONS:
      update by steph

2005-01-06  Joe Orton  <jorton@redhat.com>

    * (PHP_4_3)
      NEWS
      NEWS
      ext/curl/curl.c
      ext/curl/interface.c:
      MFH: - Fixed bug #31413 (curl POSTFIELDS crashes on 64-bit platforms).

2005-01-06  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * (PHP_5_0)
      ext/session/mod_files.c:
      Revert. This is always 1.

2005-01-05  Joe Orton  <jorton@redhat.com>

    * ext/curl/interface.c:
      Fix #31413: curl POSTFIELDS usage on 64-bit platforms.

2005-01-05  Anantha Kesari H Y  <hyanantha@novell.com>

    * (PHP_5_0)
      ext/session/mod_files.c:
      passing FD_CLOEXEC would be a standard way to pass argument to fcntl's last
      argument than 1

    * (PHP_5_0)
      ext/ldap/ldap.c:
      Removed redundant NEW_LIBC checks for NETWARE

    * (PHP_5_0)
      ext/ftp/php_ftp.c:
      Removed redundant NEW_LIBC checks for NetWare

    * (PHP_5_0)
      ext/ftp/ftp.c:
      Removed redundant NEW_LIBC checks

2005-01-04  Frank M. Kromann  <frank@kromann.info>

    * ext/gmp/config.w32:
      Allow gmp to compile under Win32

2005-01-04  Wez Furlong  <wez.php@thebrainroom.net>

    * ext/standard/streamsfuncs.c:
      Fix #31408: memory leak in stream_socket_recvfrom

2005-01-04  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * (PHP_4_3)
      main/network.c
      main/php_network.h:
      - Fix bug #31403 (php_hostconnect not defined as PHPAPI)

    * (PHP_4_3)
      NEWS
      NEWS:
      BFN

    * (PHP_4_3)
      ext/gd/config.m4
      ext/gd/gd.c:
      MFH: - Fixed bug #31396 (compile fails with gd 2.0.33 without freetype)

    * ext/gd/config.m4
      ext/gd/config.m4
      ext/gd/gd.c
      ext/gd/gd.c:
      - Fixed bug #31396 (compile fails with gd 2.0.33 without freetype)

2005-01-04  Ilia Alshanetsky  <ilia@prohost.org>

    * (PHP_5_0)
      ext/openssl/xp_ssl.c:
      Fixed compiler warning resulting from an unused variable.

2005-01-03  Stanislav Malyshev  <stas@zend.com>

    * ext/sqlite/libsqlite/src/auth.c
      ext/sqlite/libsqlite/src/auth.c:
      merge patch from http://www.sqlite.org/cvstrac/chngview?cn=1953
      bug led to PHP exiting on queries with unknown columns

    * (PHP_5_0)
      ZendEngine2/zend_language_scanner.l:
      MFH:
      Fix the following nasty bug:
      - if compile bails out from the middle of compiling, current_buffer is not
      restored
      - if current_buffer is not null, yy_switch_to_buffer will do: *yy_c_buf_p
      = yy_hold_char; on
      the next request
      - which would lead to memory corruption on next request

    * ZendEngine2/zend_language_scanner.l:
      Fix the following nasty bug:
      - if compile bails out from the middle of compiling, current_buffer is not
      restored
      - if current_buffer is not null, yy_switch_to_buffer will do: *yy_c_buf_p
      = yy_hold_char; on
      the next request
      - which would lead to memory corruption on next request

    * (PHP_4_3)
      Zend/zend_language_scanner.l:
      Fix the following nasty bug:
      - if compile bails out from the middle of compiling, current_buffer is not
      restored
      - if current_buffer is not null, yy_switch_to_buffer will do: *yy_c_buf_p
      = yy_hold_char; on the next request
      - which would lead to memory corruption on next request

2005-01-02  Ilia Alshanetsky  <ilia@prohost.org>

    * (PHP_4_3)
      NEWS
      NEWS
      Zend/zend_highlight.c
      ZendEngine2/zend_highlight.c:
      MFH: Fixed bug #31371 (highlight_file() trims new line after heredoc).

    * ZendEngine2/zend_highlight.c:
      Fixed bug #31371 (highlight_file() trims new line after heredoc).

2005-01-02  Rob Richards  <rrichards@ctindustries.net>

    * ext/dom/document.c:
      allow parser flags to be passed to xinclude()

    * (PHP_5_0)
      NEWS:
      BFN

2005-01-02  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * (PHP_4_3)
      ext/standard/tests/array/bug29493.phpt
      ext/standard/tests/array/bug29493.phpt
      ext/standard/tests/array/bug31213.phpt
      ext/standard/tests/array/bug31213.phpt:
      - MFH: add testcases for bug #29493 and #31213.

    * ext/standard/tests/array/bug29493.phpt
      ext/standard/tests/array/bug31213.phpt:
        1.1.4;
      - Add testcases for bug #29493 and #31213.

2005-01-01  Wez Furlong  <wez.php@thebrainroom.net>

    * (PHP_5_0)
      ext/openssl/config0.m4:
      Fix build here too

    * ext/openssl/config0.m4:
      Fix build...
